{
  "type": "object",
  "properties": {
    "attention_level": {
      "type": "string",
      "enum": ["URGENT", "FOCUS", "WATCH", "IGNORE"],
      "description": "The level of attention required for this asset."
    },
    "direction": {
      "type": "string",
      "enum": ["bullish", "bearish", "neutral"],
      "description": "The primary direction suggested by the chart analysis."
    },
    "setup_type": {
      "type": "string",
      "enum": ["breakout", "breakdown", "reversal", "continuation", "range", "mean_reversion", "unclear"],
      "description": "The technical setup identified."
    },
    "time_horizon": {
      "type": "string",
      "enum": ["days", "weeks", "months", "unclear"],
      "description": "The expected time horizon for the setup to play out."
    },
    "ai_direction_score": {
      "type": "number",
      "minimum": -100,
      "maximum": 100,
      "description": "The AI's directional conviction score (-100 to +100)."
    },
    "ai_setup_quality_score": {
      "type": "number",
      "minimum": 0,
      "maximum": 100,
      "description": "The AI's assessment of the setup's quality (0 to 100)."
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "The AI's confidence in its analysis (0 to 1)."
    },
    "summary_text": {
      "type": "string",
      "maxLength": 220,
      "description": "A concise summary of the chart analysis."
    },
    "why_now": {
      "type": "array",
      "minItems": 3,
      "maxItems": 7,
      "items": {
        "type": "string"
      },
      "description": "3-7 bullet points explaining the immediate technical catalysts, each citing concrete numbers from the input data."
    },
    "key_levels": {
      "type": "object",
      "properties": {
        "support": {
          "type": "array",
          "minItems": 2,
          "maxItems": 3,
          "items": {
            "type": "number"
          },
          "description": "2-3 key support levels."
        },
        "resistance": {
          "type": "array",
          "minItems": 2,
          "maxItems": 3,
          "items": {
            "type": "number"
          },
          "description": "2-3 key resistance levels."
        },
        "invalidation": {
          "type": "number",
          "description": "The price level that invalidates the current setup."
        }
      },
      "required": ["support", "resistance", "invalidation"],
      "description": "Key price levels for the setup."
    },
    "entry_zone": {
      "type": ["object", "null"],
      "properties": {
        "low": {
          "type": "number"
        },
        "high": {
          "type": "number"
        }
      },
      "required": ["low", "high"],
      "description": "The recommended entry price range."
    },
    "targets": {
      "type": "array",
      "minItems": 1,
      "maxItems": 3,
      "items": {
        "type": "number"
      },
      "description": "1-3 price targets."
    },
    "what_to_watch_next": {
      "type": "array",
      "minItems": 2,
      "maxItems": 6,
      "items": {
        "type": "string"
      },
      "description": "2-6 points on what to watch for confirmation or negation."
    },
    "risks_and_contradictions": {
      "type": "array",
      "minItems": 2,
      "maxItems": 6,
      "items": {
        "type": "string"
      },
      "description": "2-6 points on risks and contradictory signals."
    }
  },
  "required": [
    "attention_level",
    "direction",
    "setup_type",
    "time_horizon",
    "ai_direction_score",
    "ai_setup_quality_score",
    "confidence",
    "summary_text",
    "why_now",
    "key_levels",
    "targets",
    "what_to_watch_next",
    "risks_and_contradictions"
  ]
}
